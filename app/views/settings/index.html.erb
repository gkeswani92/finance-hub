<h1 class="text-2xl font-bold tracking-tight text-gray-900 mb-6">Settings</h1>

<div class="space-y-6">
  <!-- Members Card -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-sm font-semibold text-gray-900">Members</h3>
    </div>

    <%= form_with(model: @new_member, url: settings_members_path, class: "flex items-center gap-3 mb-4") do |f| %>
      <%= f.text_field :name, placeholder: "New member name", required: true,
        class: "flex-1 rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm" %>
      <%= f.select :member_type, [["Individual", "individual"], ["Joint", "joint"], ["Trust", "trust"]], {},
        class: "rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm" %>
      <%= f.submit "Add", class: "bg-gray-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 cursor-pointer transition-colors" %>
    <% end %>

    <div class="space-y-2">
      <% @members.each do |member| %>
        <div class="flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-50 transition-colors">
          <div class="flex items-center gap-3">
            <span class="w-3 h-3 rounded-full flex-shrink-0" style="background-color: <%= member.color %>"></span>
            <span class="text-sm font-medium text-gray-900"><%= member.name %></span>
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600"><%= member.member_type.capitalize %></span>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-xs text-gray-400"><%= member.accounts.count %> accounts</span>
            <% if member.accounts.count == 0 %>
              <%= button_to "/settings/members/#{member.id}", method: :delete,
                class: "text-red-500 hover:text-red-700 text-xs font-medium cursor-pointer",
                data: { turbo_confirm: "Delete member '#{member.name}'?" } do %>
                Delete
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Asset Types (Categories) Card -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-sm font-semibold text-gray-900">Asset Types</h3>
    </div>

    <%= form_with(model: @new_category, url: settings_categories_path, class: "mb-4") do |f| %>
      <div class="flex items-center gap-3">
        <%= f.text_field :name, placeholder: "New asset type name", required: true,
          class: "flex-1 rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm" %>
        <label class="flex items-center gap-1.5 text-xs text-gray-500 whitespace-nowrap">
          <%= f.check_box :is_debt, class: "rounded border-gray-300 text-teal-600 focus:ring-teal-500" %>
          Debt
        </label>
        <label class="flex items-center gap-1.5 text-xs text-gray-500 whitespace-nowrap">
          <%= f.check_box :is_liquid, checked: true, class: "rounded border-gray-300 text-teal-600 focus:ring-teal-500" %>
          Liquid
        </label>
        <%= f.submit "Add", class: "bg-gray-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 cursor-pointer transition-colors" %>
      </div>
    <% end %>

    <div class="space-y-1">
      <% @categories.each do |category| %>
        <div class="flex items-center justify-between py-2 px-3 rounded-lg hover:bg-gray-50 transition-colors">
          <div class="flex items-center gap-3">
            <span class="text-sm font-medium text-gray-900"><%= category.name %></span>
            <% if category.is_debt? %>
              <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-50 text-red-600">Debt</span>
            <% else %>
              <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-50 text-emerald-600">Asset</span>
            <% end %>
            <% if category.is_liquid? %>
              <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-600">Liquid</span>
            <% end %>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-xs text-gray-400"><%= category.accounts.count %> accounts</span>
            <% if category.accounts.count == 0 %>
              <%= button_to settings_category_path(category), method: :delete,
                class: "text-red-500 hover:text-red-700 text-xs font-medium cursor-pointer",
                data: { turbo_confirm: "Delete '#{category.name}'?" } do %>
                Delete
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
