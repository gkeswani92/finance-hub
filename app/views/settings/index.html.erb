<div class="p-8">
  <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-6">Settings</h2>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Owners -->
    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
      <h3 class="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-4">Owners</h3>

      <%= form_with(model: @new_owner, url: settings_owners_path, class: "flex items-center gap-2 mb-4") do |f| %>
        <%= f.text_field :name, placeholder: "New owner name", required: true,
          class: "flex-1 rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm" %>
        <%= f.submit "Add", class: "bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-teal-700 cursor-pointer transition-colors" %>
      <% end %>

      <ul class="divide-y divide-gray-100">
        <% @owners.each do |owner| %>
          <li class="py-3 flex items-center justify-between">
            <span class="text-sm text-gray-900"><%= owner.name %></span>
            <span class="flex items-center gap-3">
              <span class="text-xs text-gray-300"><%= owner.accounts.count %> accounts</span>
              <% if owner.accounts.count == 0 %>
                <%= button_to settings_owner_path(owner), method: :delete, class: "text-red-500 hover:text-red-700 text-xs font-medium",
                  data: { turbo_confirm: "Delete owner '#{owner.name}'?" } do %>
                  Delete
                <% end %>
              <% end %>
            </span>
          </li>
        <% end %>
      </ul>
    </div>

    <!-- Categories -->
    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
      <h3 class="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-4">Categories</h3>

      <%= form_with(model: @new_category, url: settings_categories_path, class: "mb-4 space-y-2") do |f| %>
        <div class="flex items-center gap-2">
          <%= f.text_field :name, placeholder: "New category name", required: true,
            class: "flex-1 rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm" %>
          <%= f.number_field :display_order, value: 0, class: "w-20 rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm", placeholder: "Order" %>
          <label class="flex items-center gap-1 text-sm text-gray-600">
            <%= f.check_box :is_debt, class: "rounded border-gray-300 text-teal-600 focus:ring-teal-500" %>
            Debt
          </label>
          <%= f.submit "Add", class: "bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-teal-700 cursor-pointer transition-colors" %>
        </div>
      <% end %>

      <ul class="divide-y divide-gray-100">
        <% @categories.each do |category| %>
          <li class="py-3">
            <%= form_with(model: category, url: settings_category_path(category), method: :patch, class: "flex items-center gap-2") do |f| %>
              <%= f.text_field :name, class: "flex-1 rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm" %>
              <%= f.number_field :display_order, class: "w-20 rounded-lg border-gray-300 shadow-sm focus:ring-teal-500 focus:border-teal-500 text-sm" %>
              <label class="flex items-center gap-1 text-sm text-gray-600">
                <%= f.check_box :is_debt, class: "rounded border-gray-300 text-teal-600 focus:ring-teal-500" %>
                Debt
              </label>
              <span class="text-xs text-gray-300"><%= category.accounts.count %> accts</span>
              <%= f.submit "Save", class: "text-teal-600 hover:text-teal-700 text-xs font-medium cursor-pointer" %>
              <% if category.accounts.count == 0 %>
                <%= button_to settings_category_path(category), method: :delete, class: "text-red-500 hover:text-red-700 text-xs font-medium",
                  data: { turbo_confirm: "Delete category '#{category.name}'?" } do %>
                  Delete
                <% end %>
              <% end %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
